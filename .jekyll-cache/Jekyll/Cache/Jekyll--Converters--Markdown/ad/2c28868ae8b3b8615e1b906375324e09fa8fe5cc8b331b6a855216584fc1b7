I"Ë<p><img src="https://rafaelsanches123.github.io/assets/ambiente-virtual.jpg" alt="ambiente virtual" style="width: 100%" /></p>

<p>Fala pessoal blz? Nesse post, vou mostrar para voc√™s o funcionamento do incr√≠vel <strong>virtualenv</strong>, uma ferramenta simples e poderosa que permite criar ambientes isolados de desenvolvimento na linguagem python, ou seja, torna poss√≠vel a utiliza√ß√£o de diversas bibliotecas em um mesmo ambiente sem que haja conflitos entre elas e tamb√©m o mesmo ambiente pode ser reutilizado por outras pessoas permitindo que elas usem as mesmas configura√ß√µes.</p>

<h2 id="como-esse-virtualenv-funciona">Como esse <strong>virtualenv</strong> funciona?</h2>

<p>O funcionamento do virtualenv √© algo bastante simples. Ele basicamente constr√≥i uma c√≥pia de todos os diret√≥rios necess√°rios para que um programa python seja executado, isto inclui:</p>
<ul>
  <li>As bibliotecas comuns do python (<em>standard library</em>);</li>
  <li>O gerenciador de pacotes pip;</li>
  <li>O pr√≥prio bin√°rio do python seja ele da vers√£o 2.x ou 3.x;</li>
  <li>Depend√™ncias que estiverem no diret√≥rio do <strong>pacote desejado</strong> instalado (e.g., <strong>numpy</strong> ou qualquer outra);</li>
  <li>Seu c√≥digo fonte descrevendo sua aplica√ß√£o.</li>
</ul>

<p>Desse modo ao instalar uma nova depend√™ncia (i.e., biblioteca) dentro do ambiente criado pelo <strong>virtualenv</strong>, essa depend√™ncia ser√° colocada no diret√≥rio de <strong>pacotes local</strong> relativo √† esse ambiente, e n√£o mais globalmente.</p>

<p>Assim, s√≥ esse ambiente visualiza essa depend√™ncia!</p>

<h3 id="passo-a-passo-para-utiliza√ß√£o-de-um-ambiente-virtual-em-python">Passo a passo para utiliza√ß√£o de um ambiente virtual em python</h3>

<p>Para instalar o <strong>virtualenv</strong> voc√™ precisa ter o <strong>pip</strong> instalado na sua m√°quina. O <strong>pip</strong> nada mais √© do que o <strong>gerenciador de pacotes</strong> do <strong>python</strong> assim como no <strong>java</strong> tem o <strong>maven</strong>, no <strong>nodejs</strong> tem o <strong>npm</strong> e <strong>yarn</strong> e no <strong>php</strong> tem o <strong>composer</strong>.</p>

<p>Para instalar o pip para o python 2 no sistema linux distro ubuntu digite no terminal:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install python-pip
</code></pre></div></div>

<p>Para instalar o pip para o python 3 no sistema linux distro ubuntu digite no terminal:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install python3-pip
</code></pre></div></div>

<p>Agora com o pip instalado, precisamos executar apenas um comando para instalar o <strong>virtualenv</strong>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Para o python 2:
sudo pip install virtualenv

Para o python 3:
sudo pip3 install virtualenv
</code></pre></div></div>

<p>Agora voc√™ j√° pode come√ßar a criar seus ambientes virtuais em python!</p>

<h4 id="inicializando-um-ambiente-virtual"><strong>Inicializando um ambiente virtual</strong></h4>

<p>No terminal acesse um diret√≥rio no qual voc√™ deseja criar seu ambiente e ent√£o digite o seguinte comando:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Desse modo se voc√™ n√£o especificar o python ele ir√° criar√° um ambiente virtual para o python 2:
virtualenv nome_do_seu_ambiente_virtual

Por exemplo:
virtualenv ambiente_virtual

Outra alternativa para especificar a vers√£o do python caso a anterior n√£o seja do seu agrado:
virtualenv --python=/usr/bin/python3 nome_do_seu_ambiente_virtual
</code></pre></div></div>

<p>Esse comando cria um novo ambiente de desenvolvimento totalmente isolado e nesse caso, vamos chamar nossa pasta de <strong>ambiente_virtual</strong>.</p>

<p>Nesse ambiente/pasta s√£o criados alguns diret√≥rios importantes como:</p>

<ul>
  <li>
    <p><strong>ambiente_virtual</strong>/lib e <strong>ambiente_virtual</strong>/include: cont√™m as bibliotecas de suporte ao ambiente virtual. Os pacotes baixados via pip por exemplo ser√£o instalados em <strong>ambiente_virtual</strong>/lib/pythonX.X/pacotes-locais/ (n√£o mais globalmente).</p>
  </li>
  <li>
    <p><strong>ambiente_virtual</strong>/bin: residem os bin√°rios necess√°rios para executar o pr√≥prio <strong>python</strong>, entre outros execut√°veis (e.g., como o pip ou setuptools). Dessa forma, os comandos python script.py e <strong>ambiente_virtual</strong>/bin/python script.py produzem exatamente o mesmo resultado.</p>
  </li>
</ul>

<h4 id="ativando-um-ambiente-virtual"><strong>Ativando um ambiente virtual</strong></h4>
<p><strong>Toda vez</strong> que voc√™ <strong>desejar acessar o ambiente virtual criado</strong> √© necess√°rio que voc√™ o <strong>ative</strong>. Para isso basta digitar o seguinte comando:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Linux/MacOs:
source ambiente_virtual/bin/activate

Windows:
ambiente_virtual\Scripts\activate
</code></pre></div></div>

<p>Com seu ambiente virtual ativado voc√™ pode instalar as bibliotecas necess√°rias para o funcionamento do seu projeto.</p>

<p>Se voc√™ deseja instalar uma biblioteca que precisa utilizar em seu projeto fa√ßa da seguinte maneira:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install nome_do_pacote
</code></pre></div></div>
<p>Portanto, o nome do pacote deve ser exatamente como ele se encontra no site do <strong>pip</strong>. Ele baixar√° todos os arquivos necess√°rios e instalar√° esse pacote.</p>

<p>Ent√£o, se voc√™ quiser remover um pacote do python instalado via pip, voc√™ pode usar a op√ß√£o que remove bibliotecas em pip.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip uninstall nome_do_pacote
</code></pre></div></div>

<p>Viu como √© simples!</p>

<h4 id="desativando-um-ambiente-virtual"><strong>Desativando um ambiente virtual</strong></h4>
<p>Para desativar um ambiente virtual digite no terminal onde o ambiente virtual est√° ativado/aberto:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>deactivate
</code></pre></div></div>

<h4 id="gerar-arquivo-com-as-bibliotecas-utilizadas-no-projeto-com-suas-respectivas-vers√µes"><strong>Gerar arquivo com as bibliotecas utilizadas no projeto com suas respectivas vers√µes</strong></h4>
<p>Com o ambiente virtual ativado e na raiz do projeto digite no terminal o comando:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip freeze &gt; requirements.txt
</code></pre></div></div>
<p>requirements.txt √© o nome do seu arquivo.txt que cont√™m as depend√™ncias do seu projeto python.</p>

<h4 id="a-partir-de-um-arquivo-como-o-especificado-no-t√≥pico-acima-instalar-todas-depend√™ncias-de-um-projeto-python-a-partir-de-um-arquivo-com-a-extens√£o-txt"><strong>A partir de um arquivo como o especificado no t√≥pico acima instalar todas depend√™ncias de um projeto python a partir de um arquivo com a extens√£o .txt</strong></h4>
<p>Para instalar todas as depend√™ncias, esteja com o seu ambiente virtual ativado e no terminal digite o comando:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install -r /caminho-do-arquivo/requirements.txt
</code></pre></div></div>
:ET