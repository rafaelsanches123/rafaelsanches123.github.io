I"ó<p><img src="https://rafaelsanches123.github.io/assets/tesseract-ocr-e-python.jpg" alt="python-ocr-pytesseract" style="width: 100%" /></p>

<p>Fala pessoal blz? Nesse post, vou ensinar para voc√™s um pouco sobre uma tecnologia poderos√≠ssima que podemos utilizar com <strong>python</strong> para extrair textos de dentro de imagens. Essa tecnologia √© geralmente conhecida como <strong>OCR</strong>! Mas o que seria um OCR?</p>

<p>Optical Character Recognition (<strong>OCR</strong>) √© uma tecnologia para reconhecer caracteres a partir de um arquivo de imagem. Ent√£o, por meio do OCR √© poss√≠vel obter um arquivo de texto edit√°vel por um computador.</p>

<p>Para conseguirmos realizar essa proeza, vamos precisar ent√£o de ter em nossa m√°quina uma ferramenta de OCR e nesse caso, a escolhida para ser utilizada nesse post ser√° o Tesseract.</p>

<p>O Tesseract foi originalmente desenvolvido na <strong>Hewlett-Packard</strong> (HP) Laboratories Bristol e na HP Co, Greeley Colorado, entre os anos de 1985 √† 1994. Em 1996 foi portado para Windows e em 2005 o Tesseract foi liberado a comunidade pela HP e desde 2006 √© ent√£o desenvolvido pela gigante <strong>Google</strong>. Se a curiosidade bater, de uma olhada em seu reposit√≥rio no <a href="https://github.com/tesseract-ocr/tesseract">github</a>.</p>

<p>O Tesseract por natureza √© uma aplica√ß√£o de terminal e a sua API disponibilizada para desenvolvimento √© a <strong>libtesseract</strong> possui suporte apenas para as linguagens C/C++. Para conseguirmos utilizar essa ferramenta com python, n√≥s utilizaremos uma biblioteca chamada <strong>pytesseract</strong>. Escolhida neste post por sua facilidade e alta abstra√ß√£o de fun√ß√µes disponibilizadas dentro do Tesseract.
Sua grande vantagem √© que trabalha com argumentos do tipo <strong>Python Image Library</strong> (PIL). O suporte ao PIL possibilita a compatibilidade a todos os formatos de imagem suportados como os formatos jpeg, png, gif, bmp, tiff entre outros. Al√©m disso, ela aceita uma grande variedade de extens√µes nativamente n√£o suportadas no tesseract que por natureza aceita somente os formatos tiff e bmp.</p>

<p>Nesse post vamos realizar todo processo utilizando o sistema operacional linux com a distro Ubuntu na vers√£o 18.04 e python 3.</p>

<h2 id="instalando-tesseract-no-ubuntu">Instalando tesseract no Ubuntu</h2>

<p>Primeiro vamos come√ßar pela instala√ß√£o do <strong>Tesseract OCR</strong>. Abra o terminal e digite o seguinte comando:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install tesseract-ocr tesseract-ocr-por
</code></pre></div></div>

<h2 id="instalando-as-bibliotecas-a-serem-utilizadas-com-o-python">Instalando as bibliotecas a serem utilizadas com o python</h2>

<p>Antes de come√ßar a instalar as bibliotecas, recomendo fortemente que leia o artigo sobre ambientes virtuais. Essa leitura √© recomendada porque vai te ajudar bastante em quest√£o de organiza√ß√£o de projetos <a href="/criacao-de-um-ambiente-virtual-em-python">link para o artigo</a>. Obs: se voc√™ estiver seguindo esse post sem utilizar um ambiente virtual, ser√° importante trocar os comandos <strong>pip</strong> por <strong>pip3</strong>.</p>

<p>Instala√ß√£o da <strong>biblioteca Pillow</strong>. Abra o terminal e digite o seguinte comando:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install pillow
</code></pre></div></div>
<p>Instala√ß√£o da <strong>biblioteca Pytesseract</strong>. Abra o terminal e digite o seguinte comando:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install pytesseract
</code></pre></div></div>

<p>Agora, abra seu editor de c√≥digo ou IDE favorito e crie o arquivo python-ocr.py e salve dentro de algum diret√≥rio. No mesmo diret√≥rio salve a imagem a seguir com o nome <strong>teste-com-python-ocr</strong> e use extens√£o <strong>jpg</strong>.</p>

<p><img src="https://rafaelsanches123.github.io/assets/imagem-teste-com-ocr.jpg" alt="imagem-de-exemplo-para-teste" style="width: 100%" /></p>

<p>Agora, depois de ter baixado a imagem para o mesmo diret√≥rio do seu c√≥digo python, precisamos codificar nosso exemplo. Abra o arquivo .py que voc√™ criou e digite:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="c1"># Importando o m√≥dulo Pillow (Manipula√ß√£o de Imagens) para abrir a imagem no script
</span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="c1"># M√≥dulo para a utiliza√ß√£o da tecnologia OCR
</span><span class="kn">import</span> <span class="nn">pytesseract</span>
<span class="c1"># Extraindo o texto da imagem
</span><span class="k">print</span><span class="p">(</span> <span class="n">pytesseract</span><span class="p">.</span><span class="n">image_to_string</span><span class="p">(</span> <span class="n">Image</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="s">'teste-com-python-ocr.jpg'</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="s">'por'</span><span class="p">)</span> <span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Agora, abra seu terminal dentro do diret√≥rio onde se encontra seu c√≥digo .py e a imagem que baixou e digite o seguinte comando:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Se estiver dentro do ambiente virtual use:
python python-ocr.py

Se n√£o estiver utilizando ambiente virtual use:
python3 python-ocr.py
</code></pre></div></div>

<p>Resultado gerado:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1 P√ÅGINA

TRADU√á√ÉO

Portugu√™s - Ingl√™s
</code></pre></div></div>

<p>Simples n√£o √© mesmo? Vale ressaltar que nem sempre o texto resultante √© 100% correto, a tecnologia OCR depende muito da qualidade da imagem e da quantidade de detalhes que a mesma possui. Para tentar corrigir esses possiveis problemas, existem algumas t√©cnicas usadas para fazer melhorias na imagem diminuindo a chance de erros na hora da extra√ß√£o em um outro post tentarei falar mais sobre essas abordagens de corre√ß√£o.</p>
:ET